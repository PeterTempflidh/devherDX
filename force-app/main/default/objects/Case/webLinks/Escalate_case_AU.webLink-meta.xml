<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Escalate_case_AU</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Escalate</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>/*{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/connection.js&quot;)} 
var opp = new sforce.SObject(&quot;Opportunity&quot;); 
opp.id = &quot;{!Opportunity.Id}&quot;; 
opp.Quality_Check__c = new Date(); 
opp.StageName = (&quot;Closed Won&quot;);
opp.Probability = 100;
opp.Quality_Check_By__c = &quot;{!$User.Id}&quot;; 
result = sforce.connection.update([opp]); 
window.parent.location.reload();*/

{!REQUIRESCRIPT(&quot;/xdomain/xdomain.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/apex.js&quot;)} 
{!REQUIRESCRIPT(&quot;/support/console/30.0/integration.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/jq211&quot;)}
requireCssFile(&apos;/resource/bootbox/bootstrapV1.css&apos;);
{!REQUIRESCRIPT(&quot;/resource/bootbox/bootstrap.min.js&quot;)}
{!REQUIRESCRIPT(&quot;/resource/bootbox/bootbox.min.js&quot;)}



function requireCssFile(filename){ 
	var fileref = document.createElement(&apos;link&apos;);
	fileref.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;);
	fileref.setAttribute(&apos;type&apos;, &apos;text/css&apos;);
	fileref.setAttribute(&apos;href&apos;, filename);
	document.getElementsByTagName(&apos;head&apos;)[0].appendChild(fileref);
}
{!REQUIRESCRIPT(&quot;/resource/bootbox/utilityFunctions.js&quot;)}


var btn = document.getElementsByName(&apos;escalate_case_au&apos;)[0];
construct(btn,&quot;{!$Label.Escalating_AU_case_btn}&quot;);
 

var callback = { onSuccess: function(resultData){
var result = &apos;&apos;+resultData;

if(result == &apos;{!$Label.Escalated_not_sucessful_AU}&apos; || result == &apos;{!$Label.Escalated_closed_case_AU}&apos; || result == &apos;{!$Label.Escalated_already_AU}&apos; || result == &apos;{!$Label.Escalated_only_if_owner}&apos;){
bootbox.alert(result, function() {
	  refreshParent();
	}).find(&apos;.modal-content&apos;).addClass( &quot;error&quot; );
}else{
	bootbox.alert(result, function() {
	  refreshParent();
	}).find(&apos;.modal-content&apos;).addClass( &quot;success&quot; );
}
	}, onFailure: function(error){
		bootbox.alert(error, function() {
		 refreshParent();
		}).find(&apos;.modal-content&apos;).addClass( &quot;error&quot; );
	}};
var callResult = sforce.apex.execute(&quot;ClsRemoteController&quot;,&quot;escalateCaseAU&quot;,{caseId:&apos;{!Case.Id}&apos;},callback);</url>
</WebLink>

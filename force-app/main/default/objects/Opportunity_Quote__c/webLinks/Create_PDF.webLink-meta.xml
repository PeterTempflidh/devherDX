<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Create_PDF</fullName>
    <availability>online</availability>
    <displayType>button</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Create PDF</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <url>{!REQUIRESCRIPT(&quot;/xdomain/xdomain.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/apex.js&quot;)} 
{!REQUIRESCRIPT(&quot;/support/console/30.0/integration.js&quot;)} 
{!REQUIRESCRIPT(&quot;/resource/jq211&quot;)} 
requireCssFile(&apos;/resource/bootbox/bootstrapV1.css&apos;); 
{!REQUIRESCRIPT(&quot;/resource/bootbox/bootstrap.min.js&quot;)} 
{!REQUIRESCRIPT(&quot;/resource/bootbox/bootbox.min.js&quot;)} 

function requireCssFile(filename){ 
var fileref = document.createElement(&apos;link&apos;); 
fileref.setAttribute(&apos;rel&apos;, &apos;stylesheet&apos;); 
fileref.setAttribute(&apos;type&apos;, &apos;text/css&apos;); 
fileref.setAttribute(&apos;href&apos;, filename); 
document.getElementsByTagName(&apos;head&apos;)[0].appendChild(fileref); 
} 

{!REQUIRESCRIPT(&quot;/resource/bootbox/utilityFunctions.js&quot;)} 
construct(this, &apos;{!$Label.Quote_PDF_Generating_PDF}&apos;); 

var status = &apos;{!Opportunity_Quote__c.Status__c}&apos;; 
var quoteId = &apos;{!Opportunity_Quote__c.Id}&apos;; 
if(status != &apos;Approved&apos; &amp;&amp; status != &apos;Accepted&apos;){ 
bootbox.alert(&apos;{!$Label.Quote_PDF_Error_Status_Not_Approved}&apos;).find(&apos;.modal-content&apos;).addClass( &quot;error&quot; ); 
} else { 
navigateToUrl(&apos;/apex/RenderQuoteAsPDF?id=&apos; + quoteId); 
//window.open(&apos;/apex/RenderQuoteAsPDF?id=&apos; + quoteId, &apos;_self&apos;, false);
} 
postAction();</url>
</WebLink>
